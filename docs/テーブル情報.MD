# 勤務表管理サイトのテーブル情報
## セッション情報 ウェブシステムでログイン中に保持する情報
| No. | 項目名 | ID | 属性 | 備考 |
| --- | --- | --- | --- | --- |
| 1 | 個人コード | MM\_Username | char(5) | ログイン時に設定 |
| 2 | 氏名 | MM\_staffname | char(30) | ログイン時に設定 |
| 3 | 組織コード | MM\_orgcode | char(6) | ログイン時に設定 |
| 4 | 勤怠入力フラグ | MM\_is\_input | char(1) | ログイン時に設定   1:入力必要, 0:入力不要 |
| 5 | 支店控除入力担当者フラグ | MM\_is\_deduction | char(1) | ログイン時に設定   1:担当者, 0:以外 |
| 6 | 全体入力担当者フラグ | MM\_is\_charge | char(1) | ログイン時に設定   1:担当者, 0:以外 |
| 7 | 上長フラグ | MM\_is\_superior | char(1) | ログイン時に設定   1:上長, 0:以外 |
| 8 | 組織名称 | MM\_orgname | char(100) | ログイン時に設定 |
| 9 | 勤務体系 | MM\_workshift | char(1) | 0:一般勤務,1:コミュ全日,2:コミュ午前.3:コミュ午後,9:フレックス勤務 |

## 基準労働時間テーブル　baseworktimetbl
| No. | 項目名 | ID | 属性 | 備考 |
| --- | --- | --- | --- | --- |
| 1 | データID | id | int | 自動採番 |
| 2 | 更新時刻 | updatetime | timestamp | データ更新時刻 |
| 3 | 個人コード | personalcode | char(5) | 個別設定のみ個人コーが存在。標準は00000のデータ |
| 4 | 年月 | ymb | char(6) | yyyymm |
| 5 | 基準時間 | basemin | int | 勤務時間分 |

## 支店控除テーブル deductiontbl
| No. | 項目名 | ID | 属性 | 備考 |
| --- | --- | --- | --- | --- |
| 1 | データID | id | int | 自動採番 |
| 2 | 更新時刻 | updatetime | timestamp | データ更新時刻 |
| 3 | 個人コード | personalcode | char(5) | 　 |
| 4 | 年月分 | ymb | char(6) | yyyymm |
| 5 | 全労済（火災共済）控除額 | amount01 | int | 　 |
| 6 | 全労済（交通災害）控除額 | amount02 | int | 　 |
| 7 | 駐車場代控除額 | amount03 | int | 　 |
| 8 | 社宅共益費控除額 | amount04 | int | 　 |
| 9 | 水道代控除額 | amount05 | int | 　 |
| 10 | 合格祝金控除額 | amount06 | int | 　 |
| 11 | 支部費（組合）控除額 | amount07 | int | 　 |
| 12 | その他1名称 | amount08ncr | char(10) | 　 |
| 13 | その他1控除額 | amount08 | int | 　 |
| 14 | その他2名称 | amount09ncr | char(10) | 　 |
| 15 | その他2控除額 | amount09 | int | 　 |
| 16 | その他3名称 | amount10ncr | char(10) | 　 |
| 17 | その他3控除額 | amount10 | int | 　 |

## 勤務表テーブル dutyrostertbl
| No. | 項目名 | ID | 属性 | 備考 |
| --- | --- | --- | --- | --- |
| 1 | データID | id | int | 自動採番 |
| 2 | 更新時刻 | updatetime | timestamp | データ更新時刻 |
| 3 | 個人コード | personalcode | char(5) | 　 |
| 4 | 年月分 | ymb | char(6) | yyyymm |
| 5 | 可出勤日数 | workdays | float | 　 |
| 6 | 代休日数 | workholidays | float | 　 |
| 7 | 欠勤日数 | absencedays | float | 　 |
| 8 | 有休日数 | paidvacations | float | 　 |
| 9 | 保存休日数 | preservevacations | float | 　 |
| 10 | 特休日数 | specialvacations | float | 　 |
| 11 | 休出日数 | holidayshifts | float | 　 |
| 12 | 実出勤日数 | realworkdays | float | 　 |
| 13 | 遅早回数 | shortdays | float | 　 |
| 14 | 宿直Ａ回数 | nightduty\_a | int | 　 |
| 15 | 宿直Ｂ回数 | nightduty\_b | int | 　 |
| 16 | 宿直Ｃ回数 | nightduty\_c | int | 　 |
| 17 | 宿直Ｄ回数 | nightduty\_d | int | 　 |
| 18 | 休日割増 | holidaypremium | float | 　 |
| 19 | 日直 | dayduty | int | 　 |
| 20 | 交替勤務甲番 | shiftwork\_kou | float | 　 |
| 21 | 交替勤務乙番 | shiftwork\_otsu | float | 　 |
| 22 | 交替勤務丙番 | shiftwork\_hei | float | 　 |
| 23 | 呼出通常回数 | summons | int | 　 |
| 24 | 呼出深夜回数 | summonslate | int | 　 |
| 25 | 年末年始1230 | yearend1230 | float | 　 |
| 26 | 年末年始1231 | yearend1231 | float | 　 |
| 27 | 時間代休 | workholidaytime | float | 　 |
| 28 | 深夜割増 | latepremium | float | 　 |
| 29 | 時間外 | overtime | float | 　 |
| 30 | 休日出勤時間 | holidayshifttime | float | 　 |
| 31 | 休出時間外 | holidayshiftovertime | float | 　 |
| 32 | 休出深夜業 | holidayshiftlate | float | 　 |
| 33 | 時間外深夜業 | overtimelate | float | 　 |
| 34 | 休出時間外深 | holidayshiftovertimelate | float | 　 |
| 35 | 当月末有給休暇残 | vacationnumber | float | 　 |
| 36 | 当月末振替休日残 | holidaynumber | float | 　 |
| 37 | 時間有給 | vacationtime | float | 　 |
| 38 | 交替勤務A番 | shiftwork\_a | float | 　 |
| 39 | 交替勤務B番 | shiftwork\_b | float | 　 |
| 40 | 土曜勤務時間(分) | saturday\_workmin | float | コミュニケータの土曜勤務時間(時間外は含まない) |
| 41 | 平日勤務時間(分) | weekdays\_workmin | float | コミュニケータの平日勤務時間(時間外は含まない) |
| 42 | 労働時間(分) | workingmins | int | 月内労働時間分(時間外除く) |
| 43 | 当月労働時間(分) | currentworkmin | int | 振替出勤、振休等を考慮した月内労働時間 |
| 44 | 法定休日割増時間 | legalholiday\_extra\_min | int | フレックスのみ使用。日直の労働時間は集計しないが、日直の時間外を集計した時間(分)。 |
| 45 | 週超過時間 | weekovertime | float | 　 |

## 処理制御テーブル controltbl
| No. | 項目名 | ID | 属性 | 備考 |
| --- | --- | --- | --- | --- |
| 1 | データID | id | int | 1固定 |
| 2 | 更新時刻 | updatetime | timestamp | データ更新時刻 |
| 3 | 勤怠管理システム利用可 | systemenable | char(1) | 0:利用可,1:利用不可 |

## 公休日テーブル holidaytbl
| No. | 項目名 | ID | 属性 | 備考 |
| --- | --- | --- | --- | --- |
| 1 | データID | id | int | 自動採番 |
| 2 | 更新時刻 | updatetime | timestamp | データ更新時刻 |
| 3 | 公休日日付 | holidaydate | char(8) | yyyymmdd |
| 4 | 公休日区分 | holidaytype | char(1) | 1:職員公休 |
| 5 | メモ | memo | char(100) | 　 |

## IPテーブル iptbl
| No. | 項目名 | ID | 属性 | 備考 |
| --- | --- | --- | --- | --- |
| 1 | 更新時刻 | updatetime | timestamp | データ更新時刻 |
| 2 | IP | ipnumber | char(15) | ホスト名 |
| 3 | 個人コード | personalcode | char(10) | 前ゼロ埋めで個人コード |
| 4 | 使用開始日 | begindate | char(8) | yyyymmdd |
| 5 | 使用終了日 | enddate | char(8) | yyyymmdd |

## 組織テーブル orgtbl
| No. | 項目名 | ID | 属性 | 備考 |
| --- | --- | --- | --- | --- |
| 1 | データID | id | int | 自動採番 |
| 2 | 更新時刻 | updatetime | timestamp | データ更新時刻 |
| 3 | 個人コード | personalcode | char(5) | 　 |
| 4 | 管理区分 | manageclass | char(1) | 0:支店控除担当, 1:全体入力担当者, 2:上長 |
| 5 | 組織コード | orgcode | char(6) | 　 |

## 組織名テーブル orgnametbl
| No. | 項目名 | ID | 属性 | 備考 |
| --- | --- | --- | --- | --- |
| 1 | 組織コード | orgcode | char(6) | 　 |
| 2 | 組織名称 | orgname | char(100) | 　 |

## 電源時刻テーブル pctimetbl
| No. | 項目名 | ID | 属性 | 備考 |
| --- | --- | --- | --- | --- |
| 1 | 更新時刻 | updatetime | timestamp | データ更新時刻 |
| 2 | 個人コード | personalcode | char(10) | 現在は空白 |
| 3 | IP | ipnumber | char(15) | ホスト名 |
| 4 | 日付 | pcdate | char(8) | yyyymmdd |
| 5 | 時刻 | pctime | char(4) | hhmm |
| 6 | オンオフ | pcstatus | char(10) | 　 |

## 保存休暇残日数テーブル remainvacationtbl
| No. | 項目名 | ID | 属性 | 備考 |
| --- | --- | --- | --- | --- |
| 1 | 更新時刻 | updatetime | timestamp | データ更新時刻 |
| 2 | 個人コード | personalcode | char(5) | 　 |
| 3 | 年月分 | ymb | char(6) | yyyymm 原則毎年4月時点のデータを作成 |
| 4 | 残保存休暇日数 | remainvacation | float | 　 |

## 社員テーブル stafftbl
| No. | 項目名 | ID | 属性 | 備考 |
| --- | --- | --- | --- | --- |
| 1 | データID | id | int | 自動採番 |
| 2 | 更新時刻 | updatetime | timestamp | データ更新時刻 |
| 3 | 個人コード | personalcode | char(5) | 　 |
| 4 | 氏名 | staffname | char(30) | 　 |
| 5 | 組織コード | orgcode | char(6) | 　 |
| 7 | 等級コード | gradecode | char(3) | 　 |
| 6 | オペレータフラグ | is\_operator | char(1) | 　 |
| 9 | 勤怠入力フラグ | is\_input | char(1) | 0:入力不要, 1:入力必要 |
| 10 | 担当者フラグ（全体入力） | is\_charge | char(1) | 0:以外, 1:担当者 |
| 11 | 上長フラグ | is\_superior | char(1) | 0:以外, 1:上長 |
| 12 | 有効フラグ | is\_enable | char(1) | 0:無効データ, 1:有効データ |
| 13 | パスワード | password | char(42) | コマンド password() で暗号化 |
| 14 | 処理済日付 | processed\_ymb | char(6) | 給与担当者が処理した日付 |
| 15 | 公休日区分 | holidaytype | char(1) | 1:職員公休, 2:ピポット公休 |
| 16 | 支店控除入力担当者フラグ | is\_deduction | char(1) | 0:以外, 1:担当者 |
| 17 | 始業時刻 | opentime | char(4) | hhmm 入力がない場合はプログラムで0830をデフォルト値とする |
| 18 | 終業時刻 | closetime | char(4) | hhmm 入力がない場合はプログラムで1710をデフォルト値とする |
| 19 | 組合執行部フラグ | is\_unionexecutive | char(1) | 0:以外,1:執行部 |
| 20 | 有給休暇付与日 | grantdate | char(4) | MMDD |
| 21 | 勤務体系 | workshift | char(1) | 0:一般勤務,1:コミュ全日,2:コミュ午前.3:コミュ午後,9:フレックス勤務 |
| 22 | 旧勤務体系 | old\_workshift | char(1) | 同上 |
| 23 | 旧勤務体系最終摘要年月 | old\_workshift\_last\_ymb | char(6) | YYYYMM |
| 24 | 基準午前勤務時間(分) | base\_am\_workmin | int | 　 |
| 25 | 基準午後勤務時間(分) | base\_pm\_workmin | int | 　 |

## タイムテーブル timetbl
| No. | 項目名 | ID | 属性 | 備考 |
| --- | --- | --- | --- | --- |
| 1 | データID | id | int | 自動採番 |
| 2 | 更新時刻 | updatetime | timestamp | データ更新時刻 |
| 3 | 個人コード | personalcode | char(5) | 　 |
| 4 | 日付 | workingdate | char(8) | yyyymmdd |
| 5 | 出社日付 | comedate | char(8) | yyyymmdd |
| 6 | 出社時刻 | cometime | char(4) | hhmm |
| 7 | 外出日付 | outdate | char(8) | yyyymmdd |
| 8 | 外出時刻 | outtime | char(4) | hhmm |
| 9 | 戻り日付 | returndate | char(8) | yyyymmdd |
| 10 | 戻り時刻 | returntime | char(4) | hhmm |
| 11 | 退社日付 | leavedate | char(8) | yyyymmdd |
| 12 | 退社時刻 | leavetime | char(4) | hhmm |

## タイプテーブル typetbl
| No. | 項目名 | ID | 属性 | 備考 |
| --- | --- | --- | --- | --- |
| 1 | データID | id | int | 自動採番 |
| 2 | コード分類 | codetype | CHAR(20) | 　 |
| 3 | 上位コード | uppercode | CHAR(20) | 　 |
| 4 | コード | code | CHAR(20) | 　 |
| 5 | コード名称 | codetext | CHAR(40) | 　 |
| 6 | コード略称 | abbrcodetext | CHAR(20) | 　 |
| 7 | 表示順 | dispseq | NUMBER(3,0) | 　 |

## 勤怠テーブル worktbl
| No. | 項目名 | ID | 属性 | 備考 |
| --- | --- | --- | --- | --- |
| 1 | データID | id | int | 自動採番 |
| 2 | 更新時刻 | updatetime | timestamp | データ更新時刻 |
| 3 | 個人コード | personalcode | char(5) | 　 |
| 4 | 日付 | workingdate | char(8) | yyyymmdd |
| 5 | 出勤区分（午前） | morningwork | char(1) | 下記コード表参照 |
| 6 | 出勤区分（午後） | afternoonwork | char(1) | 下記コード表参照 |
| 7 | 休日区分（午前） | morningholiday | char(1) | 下記コード表参照 |
| 8 | 休日区分（午後） | afternoonholiday | char(1) | 下記コード表参照 |
| 9 | 呼出区分 | summons | char(1) | 下記コード表参照 |
| 10 | 時間外(休日出勤)開始時刻 | overtime\_begin | char(4) | hhmm |
| 11 | 時間外(休日出勤)終了時刻 | overtime\_end | char(4) | hhmm |
| 12 | 時間外(休日出勤)休憩開始時刻 | rest\_begin | char(4) | hhmm |
| 13 | 時間外(休日出勤)休憩終了時刻 | rest\_end | char(4) | hhmm |
| 14 | 時間外 | overtime | char(4) | hhmm |
| 15 | 時間外深夜業 | overtimelate | char(4) | hhmm |
| 16 | 休日出勤 | holidayshift | char(4) | hhmm |
| 17 | 休出時間外 | holidayshiftovertime | char(4) | hhmm |
| 18 | 休出深夜業 | holidayshiftlate | char(4) | hhmm |
| 19 | 休出時間外深夜業 | holidayshiftovertimelate | char(4) | hhmm |
| 20 | 時間代休申請時間数 | requesttime | char(4) | hhmm |
| 21 | 時間代休申請開始時刻 | requesttime\_begin | char(4) | hhmm |
| 22 | 時間代休申請終了時刻 | requesttime\_end | char(4) | hhmm |
| 23 | 深夜割増時間数 | latetime | char(4) | hhmm |
| 24 | 深夜割増開始時刻 | latetime\_begin | char(4) | hhmm |
| 25 | 深夜割増終了時刻 | latetime\_end | char(4) | hhmm |
| 26 | 上長承認 | is\_approval | char(1) | 0:未承認、 1:承認 |
| 27 | 宿直 | nightduty | char(1) | 0:なし、1:責任者、2:処理者 |
| 28 | 日直 | dayduty | char(1) | 0:なし、1:責任者、2:処理者、3:土曜出番 |
| 29 | オペレータ | operator | char(1) | 下記コード表参照 |
| 30 | 時間有給申請時間数 | vacationtime | char(4) | hhmm |
| 31 | 時間有給申請開始時刻 | vacationtime\_begin | char(4) | hhmm |
| 32 | 時間有給申請終了時刻 | vacationtime\_end | char(4) | hhmm |
| 33 | メモ | memo | char(100) | プログラム側では５０文字まで入力可能としている。全角対応のため。 |
| 34 | メモ2 | memo2 | char(2) | typetbl memoの値を格納 |
| 35 | エラーフラグ | is\_error | char(1) | 0:エラーなし、1:エラー |
| 36 | 勤務開始時間 | work\_begin | char(4) | hhmm |
| 37 | 勤務終了時間 | work\_end | char(4) | hhmm |
| 38 | 休憩開始時間 | break\_begin1 | char(4) | hhmm |
| 39 | 休憩終了時間 | break\_end1 | char(4) | hhmm |
| 40 | 中抜け開始時間 | break\_begin2 | char(4) | hhmm |
| 41 | 中抜け終了時間 | break\_end2 | char(4) | hhmm |
| 42 | 労働時間 | workmin | int | 勤務時間分 |
| 43 | 週超過労働時間数 | weekovertime | char(4) | hhmm |
